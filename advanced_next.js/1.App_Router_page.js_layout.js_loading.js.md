# 1. App Router: page.js, layout.js, loading.js

Next.js ১৩-এর সাথে পরিচিত **অ্যাপ রাউটার** (App Router) হল একটি আধুনিক এবং শক্তিশালী রাউটিং সিস্টেম, যা পূর্ববর্তী **Pages Router** এর তুলনায় আরও নমনীয়, দক্ষ এবং বৈশিষ্ট্যসমৃদ্ধ। এটি ফাইল-ভিত্তিক রাউটিংয়ের উপর ভিত্তি করে তৈরি, যেখানে `app` ডিরেক্টরির মধ্যে ফাইল এবং ফোল্ডার স্ট্রাকচার ব্যবহার করে রাউট এবং UI ডিফাইন করা হয়। এই কনসেপ্টের মূল তিনটি ফাইল হল: `page.js`, `layout.js`, এবং `loading.js`। এই ফাইলগুলোর কাজ, ব্যবহার এবং সিনিয়র ডেভেলপারদের জন্য এর গুরুত্ব নিয়ে বিস্তারিত আলোচনা করা হল।

---

## ১. page.js: রাউটের প্রধান UI কম্পোনেন্ট

`page.js` ফাইলটি একটি নির্দিষ্ট রাউটের প্রধান UI (ইউজার ইন্টারফেস) ডিফাইন করে। এটি App Router-এর মূল ফাইল, যা সেই রাউটের প্রাথমিক কনটেন্ট রেন্ডার করে। উদাহরণস্বরূপ, যদি আপনি `/about` পেজ তৈরি করতে চান, তাহলে `app/about/page.js` ফাইল তৈরি করবেন।

### কিভাবে কাজ করে?
- `page.js` ফাইলটি একটি React কম্পোনেন্ট রিটার্ন করে, যা সেই রাউটের জন্য রেন্ডার হবে।
- এটি সাধারণত সার্ভার কম্পোনেন্ট হিসেবে কাজ করে, যদি না `"use client"` ডিরেক্টিভ ব্যবহার করে ক্লায়েন্ট কম্পোনেন্ট হিসেবে চিহ্নিত করা হয়।
- উদাহরণ:

```jsx
// app/about/page.js
export default function AboutPage() {
  return (
    <div>
      <h1>আমাদের সম্পর্কে</h1>
      <p>এটি আমাদের অ্যাপের সম্পর্কে পেজ।</p>
    </div>
  );
}
```

এই কোডটি `/about` রাউটের জন্য UI রেন্ডার করবে।

### গুরুত্বপূর্ণ বৈশিষ্ট্য:
- **ডায়নামিক রাউটিং**: `[id]/page.js` এর মতো ফাইল তৈরি করে ডায়নামিক প্যারামিটার হ্যান্ডল করা যায়।
- **সার্ভার কম্পোনেন্ট**: ডিফল্টভাবে `page.js` সার্ভারে রেন্ডার হয়, যা দ্রুত লোড টাইম এবং কম ক্লায়েন্ট-সাইড জাভাস্ক্রিপ্ট নিশ্চিত করে।
- **মডুলারিটি**: প্রতিটি রাউটের জন্য আলাদা `page.js` ফাইল তৈরি করে কোড সংগঠিত রাখা যায়।

**সিনিয়র ডেভেলপার টিপ**: `page.js` ফাইলে ডেটা ফেচিং লজিক সরাসরি যোগ করুন এবং সার্ভার কম্পোনেন্টের সুবিধা কাজে লাগান। ডায়নামিক রাউটের জন্য `generateStaticParams` ফাংশন ব্যবহার করে SSG (Static Site Generation) অপটিমাইজ করুন।

---

## ২. layout.js: শেয়ার্ড UI এবং ন nেভিগেশন ধরে রাখা

`layout.js` ফাইলটি একটি রাউট বা তার সাব-রাউটগুলোর জন্য শেয়ার্ড UI ডিফাইন করে। এটি সাধারণত নেভিগেশন বার, ফুটার, সাইডবার বা অন্যান্য শেয়ার্ড কম্পোনেন্ট রাখে। লেআউটের সবচেয়ে বড় সুবিধা হল, এটি নেভিগেশনের সময় রি-রেন্ডার হয় না, যা ইউজার এক্সপেরিয়েন্স উন্নত করে এবং পারফরম্যান্স বাড়ায়।

### কিভাবে কাজ করে?
- `layout.js` একটি React কম্পোনেন্ট রিটার্ন করে, যেখানে `{children}` প্রপস ব্যবহার করে সাব-রাউট বা পেজ কম্পোনেন্ট রেন্ডার করা হয়।
- এটি রুট লেভেলে (`app/layout.js`) বা সাব-ফোল্ডারে (`app/dashboard/layout.js`) থাকতে পারে।
- উদাহরণ:

```jsx
// app/layout.js
export default function RootLayout({ children }) {
  return (
    <html lang="bn">
      <body>
        <header>
          <nav>
            <a href="/">হোম</a> | <a href="/about">আমাদের সম্পর্কে</a>
          </nav>
        </header>
        <main>{children}</main>
        <footer>© ২০২৫ আমার অ্যাপ</footer>
      </body>
    </html>
  );
}
```

এই কোডটি সব রাউটের জন্য শেয়ার্ড লেআউট প্রদান করবে।

### গুরুত্বপূর্ণ বৈশিষ্ট্য:
- **নেস্টেড লেআউট**: সাব-ফোল্ডারে আলাদা `layout.js` তৈরি করে নেস্টেড রাউটের জন্য কাস্টম লেআউট তৈরি করা যায়।
- **স্টেট ধরে রাখা**: লেআউট নেভিগেশনের সময় রি-রেন্ডার না হওয়ায় ক্লায়েন্ট-সাইড স্টেট (যেমন নেভিগেশন স্টেট) ধরে রাখা সম্ভব।
- **মেটা ট্যাগ**: লেআউটে `<Head>` বা মেটা ট্যাগ যোগ করে SEO অপটিমাইজেশন করা যায়।

**সিনিয়র ডেভেলপার টিপ**: লেআউটে শেয়ার্ড স্টেট ম্যানেজমেন্ট (যেমন থিম বা ইউজার সেশন) এবং কম্পোনেন্ট কম্পোজিশন সঠিকভাবে হ্যান্ডল করুন। নেস্টেড লেআউটের ক্ষেত্রে পারফরম্যান্স অপটিমাইজেশনের জন্য অপ্রয়োজনীয় রি-রেন্ডার এড়ান।

---

## ৩. loading.js: লোডিং স্টেট হ্যান্ডলিং

`loading.js` ফাইলটি একটি রাউট বা সাব-রাউটের জন্য লোডিং স্টেট UI প্রদান করে। যখন কোনো পেজ বা ডেটা ফেচিংয়ের জন্য সময় লাগে, তখন এই ফাইলের কম্পোনেন্ট স্বয়ংক্রিয়ভাবে রেন্ডার হয়। এটি React Suspense-এর সাথে কাজ করে, যা ইউজার এক্সপেরিয়েন্স উন্নত করে।

### কিভাবে কাজ করে?
- `loading.js` ফাইলটি একটি React কম্পোনেন্ট রিটার্ন করে, যা লোডিং UI হিসেবে কাজ করে।
- এটি সেই রাউট বা সাব-রাউটের জন্য স্বয়ংক্রিয়ভাবে ট্রিগার হয় যখন ডেটা ফেচিং বা রেন্ডারিং সম্পন্ন হয়নি।
- উদাহরণ:

```jsx
// app/dashboard/loading.js
export default function Loading() {
  return (
    <div>
      <h2>লোডিং হচ্ছে...</h2>
      <div className="spinner"></div>
    </div>
  );
}
```

এই কোডটি `/dashboard` রাউটের জন্য লোডিং স্টেট দেখাবে।

### গুরুত্বপূর্ণ বৈশিষ্ট্য:
- **React Suspense ইন্টিগ্রেশন**: `loading.js` স্বয়ংক্রিয়ভাবে Suspense বাউন্ডারির সাথে কাজ করে।
- **কাস্টমাইজেশন**: লোডিং UI কাস্টমাইজ করে ইউজার এক্সপেরিয়েন্স উন্নত করা যায়।
- **নেস্টেড লোডিং**: সাব-রাউটে আলাদা `loading.js` তৈরি করে নির্দিষ্ট সেকশনের জন্য লোডিং স্টেট দেখানো যায়।

**সিনিয়র ডেভেলপার টিপ**: লোডিং স্টেট কাস্টমাইজ করার সময় Skeleton UI বা অ্যানিমেশন ব্যবহার করুন। Suspense বাউন্ডারি ম্যানুয়ালি ডিফাইন করে আরও নিয়ন্ত্রণ পাওয়া যায়।

---

## App Router-এর সুবিধা এবং সিনিয়র ডেভেলপারদের জন্য গুরুত্ব

### সুবিধা:
1. **সার্ভার কম্পোনেন্ট ডিফল্ট**: App Router সার্ভার কম্পোনেন্টকে ডিফল্ট হিসেবে ব্যবহার করে, যা পারফরম্যান্স বাড়ায় এবং ক্লায়েন্ট-সাইড জাভাস্ক্রিপ্ট কমায়।
2. **নেস্টেড রাউটিং**: ফোল্ডার-ভিত্তিক স্ট্রাকচারের মাধ্যমে জটিল রাউটিং সহজে হ্যান্ডল করা যায়।
3. **স্ট্রিমিং এবং Suspense**: ডেটা ফেচিং এবং রেন্ডারিংয়ের সময় লোডিং স্টেট স্বয়ংক্রিয়ভাবে পরিচালনা করা হয়।
4. **মডুলারিটি**: `page.js`, `layout.js`, এবং `loading.js` ফাইলগুলো কোড সংগঠিত রাখতে সাহায্য করে।

### সিনিয়র ডেভেলপারদের জন্য টিপস:
- **পারফরম্যান্স অপটিমাইজেশন**: সার্ভার কম্পোনেন্টের সুবিধা কাজে লাগিয়ে অপ্রয়োজনীয় ক্লায়েন্ট-সাইড রেন্ডারিং এড়ান।
- **কম্পোনেন্ট কম্পোজিশন**: লেআউটে শেয়ার্ড লজিক এবং UI কম্পোনেন্ট সঠিকভাবে স্ট্রাকচার করুন।
- **এজ রানটাইম**: App Router এজ রানটাইমের সাথে কম্প্যাটিবল, তাই এজ ফাংশনস এবং স্ট্রিমিং ফিচার কাজে লাগান।
- **মাইগ্রেশন প্ল্যান**: Pages Router থেকে App Router-এ মাইগ্রেশনের সময় ইনক্রিমেন্টাল অ্যাডপশন স্ট্র্যাটেজি ব্যবহার করুন।

---

## উপসংহার

`page.js`, `layout.js`, এবং `loading.js` হল App Router-এর মূল উপাদান, যা Next.js অ্যাপের রাউটিং, UI এবং লোডিং স্টেট পরিচালনা করে। এই ফাইলগুলোর সঠিক ব্যবহার একজন সিনিয়র ডেভেলপারকে দ্রুত, স্কেলেবল এবং ইউজার-ফ্রেন্ডলি অ্যাপ তৈরিতে সহায়তা করে। সার্ভার কম্পোনেন্ট, Suspense, এবং নেস্টেড রাউটিংয়ের সুবিধা কাজে লাগিয়ে আপনি Next.js-এর পূর্ণ সম্ভাবনা কাজে লাগাতে পারেন।