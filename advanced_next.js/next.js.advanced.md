Next.js concepts, a senior developer should know.

1. App Router: page.js, layout.js, loading.js
2. Dynamic routes: [id].js
3. Server vs Client Components ("use client")
4. Data fetching: SSR, SSG, ISR, CSR
5. Route Handlers / API Routes
6. Middleware basics
7. Environment variables
8. Server actions
9. Edge Functions & Streaming
10. Advanced Caching & Revalidation
11. Authentication & Authorization Patterns
12. File-based and API-level Internationalization (i18n)
13. Image & Font Optimization
14. Monorepo & Module Federation with Turborepo
15. Production-grade CI/CD + Observability
16. Meta Tags & Dynamic `<head>` Handling
17. Structured Data with JSON-LD
18. Sitemap, Robots.txt, Canonical URLs
19. Custom Error Handling & NotFound Pages
20. Incremental Adoption of App Router



---




# সিনিয়র ডেভেলপারদের জন্য Next.js-এর গুরুত্বপূর্ণ কনসেপ্টস

Next.js হল একটি শক্তিশালী এবং জনপ্রিয় React ফ্রেমওয়ার্ক, যা সিনিয়র ডেভেলপারদের জন্য উচ্চ-পারফরম্যান্স, স্কেলেবল এবং ডেভেলপার-বান্ধব ওয়েব অ্যাপ্লিকেশন তৈরির জন্য অত্যন্ত গুরুত্বপূর্ণ। এই ব্লগে আমরা Next.js-এর ২০টি গুরুত্বপূর্ণ কনসেপ্ট নিয়ে বিস্তারিত আলোচনা করব, যা একজন সিনিয়র ডেভেলপারের জানা থাকা অপরিহার্য। এই কনসেপ্টগুলো বোঝা এবং প্রয়োগ করা আপনার প্রোজেক্টকে আরও দক্ষ, স্কেলেবল এবং ব্যবহারকারী-বান্ধব করে তুলবে।

---

## ১. অ্যাপ রাউটার: page.js, layout.js, loading.js

Next.js ১৩-এর সাথে পরিচিত **App Router** একটি নতুন রাউটিং সিস্টেম, যা ফাইল-ভিত্তিক রাউটিংয়ের উপর ভিত্তি করে তৈরি। এটি পূর্ববর্তী **Pages Router** থেকে আরও শক্তিশালী এবং নমনীয়। এর মূল ফাইলগুলো হল:

- **page.js**: এটি একটি রাউটের প্রধান কম্পোনেন্ট, যা সেই রাউটের UI রেন্ডার করে। উদাহরণস্বরূপ, `/about` রাউটের জন্য `app/about/page.js` ফাইল তৈরি করা হয়।
- **layout.js**: এটি একটি রাউট বা তার সাব-রাউটগুলোর জন্য শেয়ার্ড UI ডিফাইন করে। লেআউট ফাইলগুলো শেয়ার্ড নেভিগেশন বার, ফুটার বা সাইডবারের মতো উপাদান রাখে। এটি স্টেট ধরে রাখে এবং নেভিগেশনের সময় রি-রেন্ডার হয় না।
- **loading.js**: এটি একটি রাউটের জন্য লোডিং স্টেট দেখায়। ডেটা ফেচিং বা রেন্ডারিংয়ের সময় এটি স্বয়ংক্রিয়ভাবে প্রদর্শিত হয়। উদাহরণস্বরূপ, `app/dashboard/loading.js` ড্যাশবোর্ড রাউটের জন্য লোডিং UI দেখাবে।

**সিনিয়র ডেভেলপার টিপ**: লেআউট ফাইলগুলোতে শেয়ার্ড স্টেট ম্যানেজমেন্ট এবং কম্পোনেন্ট কম্পোজিশন সঠিকভাবে পরিচালনা করুন। লোডিং স্টেট কাস্টমাইজ করার সময় React Suspense ব্যবহার করুন।

---

## ২. ডায়নামিক রাউটস: [id].js

Next.js-এ ডায়নামিক রাউটিং খুবই শক্তিশালী। `[id].js` ফাইলের মাধ্যমে আপনি ডায়নামিক প্যারামিটার হ্যান্ডল করতে পারেন। উদাহরণস্বরূপ, `app/blog/[id]/page.js` তৈরি করলে `/blog/123` রাউটে `id` হিসেবে `123` পাওয়া যাবে।

- **কিভাবে কাজ করে**: `params` অবজেক্টের মাধ্যমে ডায়নামিক প্যারামিটার অ্যাক্সেস করা যায়। উদাহরণ:

```jsx
export default function BlogPost({ params }) {
  const { id } = params;
  return <div>Blog Post ID: {id}</div>;
}
```

- **একাধিক ডায়নামিক সেগমেন্ট**: `app/shop/[category]/[productId]/page.js` এর মাধ্যমে `/shop/electronics/123` রাউট হ্যান্ডল করা যায়।
- **ক্যাচ-অল রাউটস**: `[...slug].js` বা `[[...slug]].js` ব্যবহার করে একাধিক সেগমেন্ট ক্যাপচার করা যায়।

**সিনিয়র ডেভেলপার টিপ**: ডায়নামিক রাউটগুলোতে সঠিক ফলব্যাক হ্যান্ডলিং এবং ৪০৪ পেজের জন্য কনফিগারেশন করুন। `generateStaticParams` ফাংশন ব্যবহার করে SSG-র জন্য প্যারামিটার প্রি-জেনারেট করুন।

---

## ৩. সার্ভার বনাম ক্লায়েন্ট কম্পোনেন্টস ("use client")

Next.js ১৩-এর App Router সার্ভার কম্পোনেন্টসকে ডিফল্ট হিসেবে ব্যবহার করে, যা সার্ভারে রেন্ডার হয় এবং পারফরম্যান্স বাড়ায়। তবে, ইন্টারঅ্যাকটিভ কম্পোনেন্টসের জন্য ক্লায়েন্ট কম্পোনেন্টস ব্যবহার করতে হয়।

- **সার্ভার কম্পোনেন্টস**:
  - সার্ভারে রেন্ডার হয়, ক্লায়েন্টে হাইড্রেশনের প্রয়োজন নেই।
  - ডেটা ফেচিং এবং লজিক সার্ভারে থাকে, যা সিকিউরিটি এবং পারফরম্যান্স বাড়ায়।
  - উদাহরণ: ডাটাবেস থেকে ডেটা ফেচ করে UI রেন্ডার।
  
- **ক্লায়েন্ট কম্পোনেন্টস**:
  - `"use client"` ডিরেক্টিভ ব্যবহার করে ক্লায়েন্ট-সাইড রেন্ডারিং সক্ষম করা হয়।
  - React hooks (`useState`, `useEffect`) এবং ইন্টারঅ্যাকটিভিটির জন্য ব্যবহৃত হয়।
  - উদাহরণ:

```jsx
"use client";
import { useState } from "react";

export default function Counter() {
  const [count, setCount] = useState(0);
  return <button onClick={() => setCount(count + 1)}>{count}</button>;
}
```

**সিনিয়র ডেভেলপার টিপ**: সার্ভার এবং ক্লায়েন্ট কম্পোনেন্টসের সঠিক ব্যালেন্স বজায় রাখুন। অপ্রয়োজনীয় ক্লায়েন্ট কম্পোনেন্ট ব্যবহার এড়িয়ে পারফরম্যান্স অপটিমাইজ করুন।

---

## ৪. ডেটা ফেচিং: SSR, SSG, ISR, CSR

Next.js-এ ডেটা ফেচিংয়ের জন্য চারটি প্রধান পদ্ধতি রয়েছে:

- **SSR (Server-Side Rendering)**:
  - প্রতিটি রিকোয়েস্টে সার্ভারে ডেটা ফেচ করে HTML জেনারেট করে।
  - `getServerSideProps` (Pages Router) বা সার্ভার কম্পোনেন্টে সরাসরি ফেচিং।
  - উদাহরণ:

```jsx
export async function getServerSideProps() {
  const res = await fetch("https://api.example.com/data");
  const data = await res.json();
  return { props: { data } };
}
```

- **SSG (Static Site Generation)**:
  - বিল্ড টাইমে HTML জেনারেট করে, যা দ্রুত লোড হয়।
  - `getStaticProps` এবং `getStaticPaths` ব্যবহৃত হয়।
  - উদাহরণ: ব্লগ পোস্টের জন্য।

- **ISR (Incremental Static Regeneration)**:
  - SSG-র সাথে রি-জেনারেশন টাইম সেট করা যায়।
  - `revalidate` অপশন ব্যবহার করে নির্দিষ্ট সময় পর ডেটা আপডেট হয়।
  - উদাহরণ:

```jsx
export async function getStaticProps() {
  const res = await fetch("https://api.example.com/data");
  const data = await res.json();
  return { props: { data }, revalidate: 60 };
}
```

- **CSR (Client-Side Rendering)**:
  - ক্লায়েন্টে ডেটা ফেচ করা হয়, সাধারণত `useEffect` বা SWR ব্যবহার করে।
  - উদাহরণ: ড্যাশবোর্ডের রিয়েল-টাইম ডেটা।

**সিনিয়র ডেভেলপার টিপ**: প্রতিটি পদ্ধতির ট্রেড-অফ বুঝে সঠিক পদ্ধতি নির্বাচন করুন। ISR ব্যবহার করে স্কেলেবল অ্যাপ তৈরি করুন।

---

## ৫. রাউট হ্যান্ডলার্স / API রাউটস

Next.js-এ API রাউটস (`app/api/route.js`) বা রাউট হ্যান্ডলার্স ব্যবহার করে সার্ভারলেস API তৈরি করা যায়। এটি App Router-এর একটি শক্তিশালী ফিচার।

- **ব্যবহার**: HTTP মেথড (GET, POST, ইত্যাদি) হ্যান্ডল করা।
- উদাহরণ:

```jsx
export async function GET(request) {
  return new Response(JSON.stringify({ message: "Hello from API" }), {
    status: 200,
    headers: { "Content-Type": "application/json" },
  });
}
```

**সিনিয়র ডেভেলপার টিপ**: রাউট হ্যান্ডলার্সে সিকিউরিটি প্রোটোকল (যেমন CORS, রেট লিমিটিং) প্রয়োগ করুন এবং স্কেলেবল API ডিজাইন করুন।

---

## ৬. মিডলওয়্যার বেসিকস

Next.js মিডলওয়্যার (`middleware.js`) রিকোয়েস্ট প্রসেসিংয়ের জন্য শক্তিশালী টুল। এটি রিকোয়েস্টের আগে বা পরে লজিক প্রয়োগ করতে ব্যবহৃত হয়।

- **ব্যবহার**: অথেনটিকেশন, রিডাইরেক্ট, হেডার মডিফিকেশন।
- উদাহরণ:

```jsx
import { NextResponse } from "next/server";

export function middleware(request) {
  if (!request.cookies.has("token")) {
    return NextResponse.redirect(new URL("/login", request.url));
  }
  return NextResponse.next();
}
```

**সিনিয়র ডেভেলপার টিপ**: মিডলওয়্যারে পারফরম্যান্স অপটিমাইজেশন এবং এজ-রানটাইম কম্প্যাটিবিলিটি নিশ্চিত করুন।

---

## ৭. এনভায়রনমেন্ট ভ্যারিয়েবলস

Next.js-এ `.env` ফাইল ব্যবহার করে এনভায়রনমেন্ট ভ্যারিয়েবল ম্যানেজ করা হয়।

- **কনফিগারেশন**:
  - `NEXT_PUBLIC_` প্রিফিক্সযুক্ত ভ্যারিয়েবল ক্লায়েন্ট-সাইডে অ্যাক্সেসযোগ্য।
  - উদাহরণ: `.env.local` ফাইলে:

```
NEXT_PUBLIC_API_URL=https://api.example.com
DATABASE_URL=secret-database-url
```

- **অ্যাক্সেস**:

```jsx
const apiUrl = process.env.NEXT_PUBLIC_API_URL;
```

**সিনিয়র ডেভেলপার টিপ**: সিকিউরিটির জন্য সংবেদনশীল ভ্যারিয়েবল কখনো `NEXT_PUBLIC_` দিয়ে প্রকাশ করবেন না।

---

## ৮. সার্ভার অ্যাকশনস

সার্ভার অ্যাকশনস হল App Router-এর নতুন ফিচার, যা ফর্ম সাবমিশন এবং সার্ভার-সাইড লজিক হ্যান্ডল করতে ব্যবহৃত হয়।

- **ব্যবহার**:

```jsx
"use server";
export async function createPost(formData) {
  const title = formData.get("title");
  // ডাটাবেসে সেভ করা
  return { success: true };
}
```

**সিনিয়র ডেভেলপার টিপ**: সার্ভার অ্যাকশনসে ইনপুট ভ্যালিডেশন এবং এরর হ্যান্ডলিং সঠিকভাবে প্রয়োগ করুন।

---

## ৯. এজ ফাংশনস ও স্ট্রিমিং

Next.js এজ ফাংশনস এবং স্ট্রিমিং ব্যবহার করে দ্রুত এবং দক্ষ রেন্ডারিং সম্ভব।

- **এজ ফাংশনস**: Vercel-এর এজ নেটওয়ার্কে রাউট হ্যান্ডলার্স রান করা।
- **স্ট্রিমিং**: React Suspense ব্যবহার করে UI ধীরে ধীরে রেন্ডার করা।

**সিনিয়র ডেভেলপার টিপ**: স্ট্রিমিংয়ের জন্য Suspense বাউন্ডারি সঠিকভাবে ডিজাইন করুন এবং এজ ফাংশনসে লেটেন্সি কমানোর উপায় খুঁজুন।

---

## ১০. অ্যাডভান্সড ক্যাশিং ও রিভ্যালিডেশন

Next.js-এ ক্যাশিং পারফরম্যান্স বাড়ায়।

- **ক্যাশিং**: `fetch` ফাংশনে `cache` অপশন ব্যবহার।
- **রিভ্যালিডেশন**: ISR এবং `revalidatePath`/`revalidateTag` ব্যবহার।

**সিনিয়র ডেভেলপার টিপ**: ক্যাশিং স্ট্র্যাটেজি অপটিমাইজ করুন এবং রিভ্যালিডেশন ট্রিগার সঠিকভাবে সেট করুন।

---

## ১১. অথেনটিকেশন ও অথরাইজেশন প্যাটার্নস

Next.js-এ অথেনটিকেশনের জন্য NextAuth.js বা Clerk ব্যবহার করা যায়।

- **প্যাটার্নস**:
  - JWT বা OAuth ব্যবহার।
  - মিডলওয়্যারে অথেনটিকেশন চেক।
  - RBAC (Role-Based Access Control)।

**সিনিয়র ডেভেলপার টিপ**: সিকিউর সেশন ম্যানেজমেন্ট এবং API টোকেন হ্যান্ডলিং নিশ্চিত করুন।

---

## ১২. ফাইল-ভিত্তিক এবং API-লেভেল ইন্টারন্যাশনালাইজেশন (i18n)

Next.js-এ i18n ফাইল-ভিত্তিক রাউটিং এবং API-ভিত্তিক পদ্ধতির মাধ্যমে সম্ভব।

- **কনফিগারেশন**: `next.config.js` এ i18n সেটআপ।
- উদাহরণ:

```jsx
module.exports = {
  i18n: {
    locales: ["en", "bn"],
    defaultLocale: "en",
  },
};
```

**সিনিয়র ডেভেলপার টিপ**: i18n লাইব্রেরি (যেমন next-intl) ব্যবহার করে স্কেলেবল সমাধান তৈরি করুন।

---

## ১৩. ইমেজ ও ফন্ট অপটিমাইজেশন

Next.js-এ `<Image>` কম্পোনেন্ট এবং ফন্ট অপটিমাইজেশন ফিচার পারফরম্যান্স বাড়ায়।

- **ইমেজ**:
  - `next/image` ব্যবহার করে অটোমেটিক লেজি লোডিং, ফরম্যাট অপটিমাইজেশন।
- **ফন্ট**:
  - `next/font` ব্যবহার করে গুগল ফন্টস বা কাস্টম ফন্ট লোড।

**সিনিয়র ডেভেলপার টিপ**: ইমেজ ফরম্যাট (WebP) এবং ফন্ট সাবসেটিং অপটিমাইজ করুন।

---

## ১৪. মনোরিপো ও মডিউল ফেডারেশন উইথ টার্বোরিপো

Turborepo ব্যবহার করে মনোরিপো স্ট্রাকচারে Next.js অ্যাপ ম্যানেজ করা যায়। মডিউল ফেডারেশন মাইক্রোফ্রন্টএন্ড তৈরি করতে সহায়ক।

**সিনিয়র ডেভেলপার টিপ**: Turborepo-এর ক্যাশিং এবং পাইপলাইন ফিচার ব্যবহার করে বিল্ড টাইম কমান।

---

## ১৫. প্রোডাকশন-গ্রেড CI/CD + অবজারভেবিলিটি

Vercel, GitHub Actions বা CircleCI ব্যবহার করে CI/CD পাইপলাইন তৈরি করুন। অবজারভেবিলিটির জন্য Sentry বা Datadog ব্যবহার করুন।

**সিনিয়র ডেভেলপার টিপ**: লগিং, মেট্রিক্স এবং ট্রেসিং সিস্টেম সঠিকভাবে ইন্টিগ্রেট করুন।

---

## ১৬. মেটা ট্যাগস ও ডায়নামিক `<head>` হ্যান্ডলিং

Next.js-এ `<Head>` কম্পোনেন্ট ব্যবহার করে মেটা ট্যাগ ম্যানেজ করা হয়।

- উদাহরণ:

```jsx
import Head from "next/head";

export default function Page() {
  return (
    <>
      <Head>
        <title>My Page Title</title>
        <meta name="description" content="My page description" />
      </Head>
      <div>Content</div>
    </>
  );
}
```

**সিনিয়র ডেভেলপার টিপ**: SEO অপটিমাইজেশনের জন্য ডায়নামিক মেটা ট্যাগ ব্যবহার করুন।

---

## ১৭. স্ট্রাকচার্ড ডেটা উইথ JSON-LD

JSON-LD ব্যবহার করে স্ট্রাকচার্ড ডেটা SEO বাড়ায়।

- উদাহরণ:

```jsx
<Head>
  <script type="application/ld+json">
    {JSON.stringify({
      "@context": "https://schema.org",
      "@type": "WebPage",
      name: "My Page",
    })}
  </script>
</Head>
```

**সিনিয়র ডেভেলপার টিপ**: Schema.org স্পেসিফিকেশন ফলো করুন।

---

## ১৮. সাইটম্যাপ, Robots.txt, ক্যানোনিকাল URLs

- **Sitemap**: `app/sitemap.js` তৈরি করে সাইটম্যাপ জেনারেট করুন।
- **Robots.txt**: `public/robots.txt` ফাইল তৈরি।
- **ক্যানোনিকাল URLs**: `<link rel="canonical" href="...">` ব্যবহার।

**সিনিয়র ডেভেলপার টিপ**: সাইটম্যাপ ডায়নামিকভাবে জেনারেট করুন এবং ক্রলিং অপটিমাইজ করুন।

---

## ১৯. কাস্টম এরর হ্যান্ডলিং ও NotFound পেজ

- **কাস্টম এরর পেজ**: `app/error.js` এবং `app/not-found.js` তৈরি।
- উদাহরণ:

```jsx
export default function NotFound() {
  return <h1>404 - Page Not Found</h1>;
}
```

**সিনিয়র ডেভেলপার টিপ**: এরর লগিং এবং ইউজার ফ্রেন্ডলি মেসেজ নিশ্চিত করুন।

---

## ২০. ইনক্রিমেন্টাল অ্যাডপশন অফ অ্যাপ রাউটার

App Router-এ মাইগ্রেশন ধীরে ধীরে করা যায়।

- **পদ্ধতি**: Pages Router এবং App Router একসাথে ব্যবহার।
- **টিপ**: মডিউলার মাইগ্রেশন প্ল্যান তৈরি করুন।

**সিনিয়র ডেভেলপার টিপ**: মাইগ্রেশনের সময় পারফরম্যান্স এবং SEO ট্র্যাক করুন।

---

## উপসংহার

Next.js একটি শক্তিশালী ফ্রেমওয়ার্ক, যা সিনিয়র ডেভেলপারদের জন্য অপটিমাইজড এবং স্কেলেবল অ্যাপ তৈরির সুযোগ দেয়। উপরের কনসেপ্টগুলো বোঝা এবং প্রয়োগ করা আপনাকে Next.js-এর পূর্ণ সম্ভাবনা কাজে লাগাতে সাহায্য করবে।

